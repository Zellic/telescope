(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{674:function(e,s,l){Promise.resolve().then(l.bind(l,1222))},1222:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return E}});var a=l(7437),t=l(2265),n=l(5430),r=l(5691),c=l(7040),o=l(6283),d=l(9991),i=l(7240),u=l(1094),x=l(5286),h=l(3376);let m=(0,n.Pi)(()=>{let e=(0,r.gM)(),[s,l]=(0,t.useState)(""),[n,c]=(0,t.useState)(!1),m=null!==e.modals.deleteClient,j=()=>{e.modals.setDeleteClient(null),l("")};return(0,a.jsx)(i.Z,{isOpen:m,onClose:j,header:"Remove account",body:n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{children:"Deleting..."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Really remove this account from Telescope and delete all associated data?"}),(0,a.jsx)("div",{className:"flex items-center ml-6",children:(0,a.jsx)(o.QB,{account:e.modals.deleteClient})})]}),footer:n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.c,{})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Y,{isRequired:!0,type:"text",label:"Confirm",placeholder:"Type DELETE to confirm...",labelPlacement:"outside",maxLength:6,value:s,onValueChange:e=>{l(e.toUpperCase())}})}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(u.A,{color:"danger",isDisabled:"DELETE"!=s.toUpperCase(),onPress:()=>{l(""),c(!0);let s=e.modals.deleteClient.phone;h.s.getInstance().deleteaccount(s).then(s=>{c(!1),e.modals.setDeleteClient(null),s.success||e.modals.setMessageBasic("Error","Failed to delete account: ".concat(s.error))}).catch(s=>{c(!1),e.modals.setDeleteClient(null),e.modals.setMessageBasic("Error","Failed to reach server")})},children:"Delete User"}),(0,a.jsx)(u.A,{color:"default",onPress:j,children:"Cancel"})]})]})})})});var j=l(8941);let f=/\s/g,p=(0,n.Pi)(()=>{let e=(0,r.gM)(),[s,l]=(0,t.useState)(""),[n,c]=(0,t.useState)(""),d=null;0==s.length?d="Must enter a 2FA password.":s!=n&&(d="Password and confirm field must match.");let m=null!==e.modals.editPassword,p=()=>{e.modals.setEditPasswordClient(null),l(""),c("")};return(0,a.jsx)(i.Z,{isOpen:m,onClose:p,header:"Edit 2FA password",body:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"You are submitting a new 2FA password for the following account:"}),(0,a.jsx)("div",{className:"flex items-center ml-6",children:(0,a.jsx)(o.QB,{account:e.modals.editPassword})})]}),footer:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(x.Y,{isRequired:!0,type:"password",label:"2FA Password",placeholder:"Please enter the password...",labelPlacement:"outside",value:s,onValueChange:e=>{l(e.replaceAll(f,""))}}),(0,a.jsx)(x.Y,{isRequired:!0,type:"password",label:"Confirm",placeholder:"Please confirm the password...",labelPlacement:"outside",value:n,onValueChange:e=>{c(e.replaceAll(f,""))}})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(j.e,{content:null!=d?d:"",isDisabled:null===d,children:(0,a.jsx)("span",{children:(0,a.jsx)(u.A,{color:"danger",isDisabled:0==s.length||s!=n,onPress:()=>{l(""),c(""),async function(l){let a=await h.s.getInstance().setpassword(l,s);a.success||e.modals.setMessageBasic("Error","Failed to edit account password for ".concat(l,": ").concat(a.error))}(e.modals.editPassword.phone),e.modals.setEditPasswordClient(null)},children:"Change Password"})})}),(0,a.jsx)(u.A,{color:"default",onPress:p,children:"Cancel"})]})]})})})});var g=l(4992),w=l(5735),C=l(4531);let v=(0,n.Pi)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.t,{}),(0,a.jsx)(m,{}),(0,a.jsx)(p,{}),(0,a.jsx)(w.v,{}),(0,a.jsx)(g.E,{})," "]}));var P=l(4794),A=l(9834),b=l(5448);let y=(0,n.Pi)(()=>{let e=(0,r.gM)();return((0,c.e)(5e3,async()=>{"error"!==e.state&&await e.fetchClients()},[e]),"error"===e.state)?(0,a.jsx)(A.w,{children:(0,a.jsx)(b.G,{children:"Failed to reach server. Please try again later."})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{className:"flex ml-auto gap-4 justify-between",children:[(0,a.jsx)(P.A,{size:"sm",onClick:()=>{e.modals.setAddAccount("normal")},children:"Add Account"}),"Staging"==e.environment&&(0,a.jsx)(P.A,{size:"sm",onClick:()=>{e.modals.setMessage("Add Test Account","Really add test acccount?",[{key:"yes",label:"Yes",color:"success",actionType:"add_test_account"},{key:"cancel",label:"Cancel",color:"default",actionType:"default"}])},children:"Add Test Account"})]}),(0,a.jsx)(o.ZP,{}),"pending"===e.state&&(0,a.jsx)(d.c,{})]})})});var E=(0,n.Pi)(()=>(0,a.jsx)(y,{}))}},function(e){e.O(0,[492,147,51,217,821,49,940,284,971,23,744],function(){return e(e.s=674)}),_N_E=e.O()}]);