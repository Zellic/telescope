(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1782:function(e,t,n){Promise.resolve().then(n.bind(n,2449)),Promise.resolve().then(n.bind(n,4384)),Promise.resolve().then(n.bind(n,2014)),Promise.resolve().then(n.bind(n,5137)),Promise.resolve().then(n.t.bind(n,231,23)),Promise.resolve().then(n.t.bind(n,4332,23)),Promise.resolve().then(n.t.bind(n,2882,23)),Promise.resolve().then(n.t.bind(n,6571,23))},2449:function(e,t,n){"use strict";n.d(t,{Providers:function(){return l}});var r=n(7437);n(2265);var o=n(2485),s=n(6463),i=n(5169),a=n(5691);let c=e=>{let{children:t}=e;return(0,r.jsx)(a.wm,{value:a.no,children:t})};function l(e){let{children:t,themeProps:n}=e,a=(0,s.useRouter)();return(0,r.jsx)(o.w,{navigate:a.push,children:(0,r.jsx)(i.f,{...n,children:(0,r.jsx)(c,{children:t})})})}},3376:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}async request(e,t){try{let n=await fetch("".concat(this.baseURL).concat(e),t),r=await n.json();if(!n.ok)return{success:!1,error:r.error||"Unknown error occurred"};return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}async getClients(e){return e?this.request("/clients?hash="+e):this.request("/clients")}async getClient(e){return this.request("/getclient?phone="+e)}async connectClient(e){return this.request("/tgconnect?phone="+e)}async disconnectClient(e){return this.request("/tgdisconnect?phone="+e)}async deleteaccount(e){return this.request("/deleteaccount?phone="+e)}async setpassword(e,t){return this.request("/setpassword?phone="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})}async submitValue(e,t,n){return this.request("/submitvalue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,stage:t,value:n})})}async addAccount(e,t,n){return this.request("/addtgaccount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone_number:e,email:t,comment:n})})}async addTestAccount(){return this.request("/addtestaccount")}constructor(){let e=window.location.protocol,t=window.location.hostname,n="https:"===e?"https":"http";if("localhost"===t)this.baseURL="".concat(n,"://localhost:8888");else{let e=window.location.port;""==e?this.baseURL="".concat(n,"://").concat(t):this.baseURL="".concat(n,"://").concat(t,":").concat(e)}}}},5691:function(e,t,n){"use strict";n.d(t,{c:function(){return m},wm:function(){return y},no:function(){return g},gM:function(){return f}});var r=n(8890),o=n(2265),s=n(3376);let i=r.V5.enumeration("ActionType",["default","disconnect","add_test_account"]),a=r.V5.model({key:r.V5.string,label:r.V5.string,color:r.V5.maybeNull(r.V5.enumeration("Color",["default","primary","secondary","success","warning","danger"])),actionType:i}),c=r.V5.maybeNull(r.V5.reference(r.V5.late(()=>n(5691).c),{get(e,t){var n;return(null===(n=(0,r.yj)(t).clients)||void 0===n?void 0:n.find(t=>t.phone===e))||null},set:e=>e.phone})),l=r.V5.model({title:r.V5.string,message:r.V5.string,buttons:r.V5.array(a),client:c}),u=r.V5.model({addAccount:r.V5.maybeNull(r.V5.enumeration("AddAccountMode",["normal","onboarding"])),addAccountPhone:r.V5.maybeNull(r.V5.string),provide:c,editPassword:c,deleteClient:c,message:r.V5.maybeNull(l)}).actions(e=>({setProvideClient:function(t){e.provide=t},setEditPasswordClient:function(t){e.editPassword=t},setDeleteClient:function(t){e.deleteClient=t},setAddAccount:function(t){e.addAccount=t},setAddAccountPhone:function(t){e.addAccountPhone=t},setMessage:function(t,n,r,o){e.message=l.create({title:t,message:n,buttons:r,client:o||null})},setMessageBasic:function(t,n,r){e.message=l.create({title:t,message:n,buttons:[{key:"okay",label:"Okay",color:"primary",actionType:"default"}],client:r||null})},clearMessage:function(){e.message=null}})),d=r.V5.model({stage:r.V5.enumeration("AuthState",["ClientNotStarted","WaitingOnServer","PasswordRequired","AuthCodeRequired","EmailRequired","EmailCodeRequired","AuthorizationSuccess","ConnectionClosed","ErrorOccurred","PhoneNumberRequired"]),inputRequired:r.V5.boolean,error:r.V5.maybeNull(r.V5.string)}),h=r.V5.enumeration("Privileges",["view","edit_two_factor_password","login","manage_connection_state","remove_account"]),m=r.V5.model({name:r.V5.maybeNull(r.V5.string),username:r.V5.maybeNull(r.V5.string),email:r.V5.maybeNull(r.V5.string),comment:r.V5.maybeNull(r.V5.string),phone:r.V5.string,lastCode:r.V5.maybeNull(r.V5.model({value:r.V5.number,date:r.V5.number})),status:d,privileges:r.V5.array(h)}).actions(e=>({updateStatus(t){e.status=d.create(t)}})),g=r.V5.model({userApiHash:r.V5.maybeNull(r.V5.string),clients:r.V5.array(m),state:r.V5.enumeration("State",["pending","done","error"]),environment:r.V5.enumeration("Environment",["Staging","Production"]),modals:u}).actions(e=>({fetchClients:(0,r.ls)(function*(){try{let t=s.s.getInstance(),n=yield t.getClients(e.userApiHash);n.success?(n.data.hash!==e.userApiHash&&(e.clients=n.data.items||[],e.environment=n.data.environment),e.userApiHash=n.data.hash,e.state="done"):(console.error("Error fetching from server: ".concat(n.error)),e.state="error")}catch(t){console.error("Failed to fetch clients: ".concat(t)),e.state="error"}}),fetchClient:(0,r.ls)(function*(t){try{let n=s.s.getInstance(),r=yield n.getClient(t);r.success&&e.clients.replace([r.data.client])}catch(e){console.error("Failed to fetch client: ".concat(e))}})})).create({clients:[],state:"pending",environment:"Production",modals:{}}),p=(0,o.createContext)(null),y=p.Provider;function f(){let e=(0,o.useContext)(p);if(null===e)throw Error("Store cannot be null, please add a context provider");return e}(0,r.cf)(g,e=>{console.log("snapshot",e)})},4332:function(){}},function(e){e.O(0,[228,895,492,147,49,966,971,23,744],function(){return e(e.s=1782)}),_N_E=e.O()}]);