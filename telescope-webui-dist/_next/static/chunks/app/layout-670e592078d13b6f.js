(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{31:function(e,t,s){Promise.resolve().then(s.bind(s,8941)),Promise.resolve().then(s.bind(s,4384)),Promise.resolve().then(s.bind(s,1410)),Promise.resolve().then(s.bind(s,5137)),Promise.resolve().then(s.t.bind(s,231,23)),Promise.resolve().then(s.t.bind(s,4332,23)),Promise.resolve().then(s.t.bind(s,2882,23)),Promise.resolve().then(s.t.bind(s,6571,23))},8941:function(e,t,s){"use strict";s.d(t,{Providers:function(){return l}});var n=s(7437);s(2265);var a=s(4140),o=s(6463),r=s(5169),c=s(7484);let i=e=>{let{children:t}=e;return(0,n.jsx)(c.wm,{value:c.no,children:t})};function l(e){let{children:t,themeProps:s}=e,c=(0,o.useRouter)();return(0,n.jsx)(a.w,{navigate:c.push,children:(0,n.jsx)(r.f,{...s,children:(0,n.jsx)(i,{children:t})})})}},7484:function(e,t,s){"use strict";s.d(t,{c:function(){return m},wm:function(){return A},no:function(){return g},gM:function(){return V}});var n,a,o,r,c=s(8890),i=s(2265);let l=c.V5.enumeration("ActionType",["default","disconnect","add_test_account"]),d=c.V5.model({key:c.V5.string,label:c.V5.string,color:c.V5.maybeNull(c.V5.enumeration("Color",["default","primary","secondary","success","warning","danger"])),actionType:l}),u=c.V5.maybeNull(c.V5.reference(c.V5.late(()=>s(7484).c),{get(e,t){var s;return(null===(s=(0,c.yj)(t).clients)||void 0===s?void 0:s.find(t=>t.phone===e))||null},set:e=>e.phone})),E=c.V5.model({title:c.V5.string,message:c.V5.string,buttons:c.V5.array(d),client:u}),S=c.V5.model({addAccount:c.V5.maybeNull(c.V5.enumeration("AddAccountMode",["normal","onboarding"])),provide:u,editPassword:u,deleteClient:u,message:c.V5.maybeNull(E)}).actions(e=>({setProvideClient:function(t){e.provide=t},setEditPasswordClient:function(t){e.editPassword=t},setDeleteClient:function(t){e.deleteClient=t},setAddAccount:function(t){e.addAccount=t},setMessage:function(t,s,n,a){e.message=E.create({title:t,message:s,buttons:n,client:a||null})},setMessageBasic:function(t,s,n){e.message=E.create({title:t,message:s,buttons:[{key:"okay",label:"Okay",color:"primary",actionType:"default"}],client:n||null})},clearMessage:function(){e.message=null}}));(n=o||(o={})).ADD_ACCOUNT="ADD_ACCOUNT",n.ADD_TEST_ACCOUNT="ADD_TEST_ACCOUNT",n.SUBMIT_VALUE="SUBMIT_VALUE",n.DELETE_ACCOUNT="DELETE_ACCOUNT",n.CONNECT_CLIENT="CONNECT_CLIENT",n.DISCONNECT_CLIENT="DISCONNECT_CLIENT",n.SET_PASSWORD="SET_PASSWORD";let C=c.V5.model({socketState:c.V5.enumeration(["connecting","open","closed","error"]),responseStatus:c.V5.enumeration(["waiting","received"])}).volatile(e=>({socket:null})).actions(e=>({setState(t){e.socketState=t},connect(t){e.socket&&e.socket.close(),this.setState("connecting"),e.socket=new WebSocket(t),e.socket.onopen=()=>{this.setState("open")},e.socket.onclose=()=>{this.setState("closed")},e.socket.onerror=e=>{this.setState("error")},e.socket.onmessage=t=>{let s=JSON.parse(t.data);s.hasOwnProperty("type")?(0,c.yj)(e).updateFromSocket(s):console.error("WebSocket data must contain an `id` field")}},sendMessage(t){e.socket&&e.socket.readyState===WebSocket.OPEN?e.socket.send(JSON.stringify(t)):console.error("Failed to send message: WebSocket is closed")},addAccount(e,t,s){this.sendMessage({type:o.ADD_ACCOUNT,data:{phone:e,email:t,comment:s}})},addTestAccount(){this.sendMessage({type:o.ADD_TEST_ACCOUNT})},submitValue(e,t,s){this.sendMessage({type:o.SUBMIT_VALUE,data:{phone:e,stage:t,value:s}})},deleteAccount(e){this.sendMessage({type:o.DELETE_ACCOUNT,data:{phone:e}})},disconnectClient(e){this.sendMessage({type:o.DISCONNECT_CLIENT,data:{phone:e}})},connectClient(e){this.sendMessage({type:o.CONNECT_CLIENT,data:{phone:e}})},setPassword(e,t){this.sendMessage({type:o.SET_PASSWORD,data:{phone:e,password:t}})},setWaiting(){e.responseStatus="waiting"},setReceived(){e.responseStatus="received"},disconnect(){e.socket&&(e.socket.close(),e.socket=null,e.socketState="closed")}}));(a=r||(r={})).SSO_START="SSO_START",a.CLIENT_START="CLIENT_START",a.ADD_ACCOUNT_RESPONSE="ADD_ACCOUNT_RESPONSE",a.ADD_TEST_ACCOUNT_RESPONSE="ADD_TEST_ACCOUNT_RESPONSE",a.SUBMIT_VALUE_RESPONSE="SUBMIT_VALUE_RESPONSE",a.DELETE_ACCOUNT_RESPONSE="DELETE_ACCOUNT_RESPONSE",a.CONNECT_CLIENT_RESPONSE="CONNECT_CLIENT_RESPONSE",a.DISCONNECT_CLIENT_RESPONSE="DISCONNECT_CLIENT_RESPONSE",a.SET_PASSWORD_RESPONSE="SET_PASSWORD_RESPONSE";var N=s(357);let _=c.V5.model({stage:c.V5.enumeration("AuthState",["ClientNotStarted","WaitingOnServer","PasswordRequired","AuthCodeRequired","EmailRequired","EmailCodeRequired","AuthorizationSuccess","ConnectionClosed","ErrorOccurred","PhoneNumberRequired","RegistrationRequired"]),inputRequired:c.V5.boolean,error:c.V5.maybeNull(c.V5.string)}),T=c.V5.enumeration("Privileges",["view","edit_two_factor_password","login","manage_connection_state","remove_account"]),m=c.V5.model({name:c.V5.maybeNull(c.V5.string),username:c.V5.maybeNull(c.V5.string),email:c.V5.maybeNull(c.V5.string),comment:c.V5.maybeNull(c.V5.string),phone:c.V5.string,lastCode:c.V5.maybeNull(c.V5.model({value:c.V5.number,date:c.V5.number})),status:_,privileges:c.V5.array(T)}).actions(e=>({updateStatus(t){e.status=_.create(t)}})),O=c.V5.enumeration("Environment",["Staging","Production"]),g=c.V5.model({clients:c.V5.array(m),ssoClient:u,ssoEmail:c.V5.maybeNull(c.V5.string),clientsState:c.V5.enumeration("State",["pending","done"]),environment:O,modals:S,socket:C}).actions(e=>({updateFromSocket:function(t){switch(N.env.NEXT_PUBLIC_DEBUG_LOG&&console.log(t),t.type){case r.CLIENT_START:e.clients=t.data.items||[],e.environment=t.data.environment,e.clientsState="done",e.ssoEmail&&(e.ssoClient=e.clients.find(t=>t.email===e.ssoEmail));break;case r.SSO_START:e.ssoEmail=t.data.email,e.ssoClient=e.clients.find(t=>t.email===e.ssoEmail);break;case r.ADD_ACCOUNT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to add account: ".concat(t.data.error));break;case r.ADD_TEST_ACCOUNT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't create test account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Created test account.");break;case r.SUBMIT_VALUE_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&console.error("SUBMIT_VALUE_RESPONSE: ".concat(t.data.error));break;case r.DELETE_ACCOUNT_RESPONSE:e.modals.setDeleteClient(null),e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to delete account: ".concat(t.data.error));break;case r.CONNECT_CLIENT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't connect account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Connected account.");break;case r.DISCONNECT_CLIENT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't disconnect account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Disconnected account.");break;case r.SET_PASSWORD_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to edit account password for: ".concat(t.data.error))}},setMockStage:function(t){e.ssoClient&&(e.ssoClient.status.stage=t)}})).create({clients:[],clientsState:"pending",environment:"Production",modals:{},socket:{socketState:"connecting",responseStatus:"received"}}),R=(0,i.createContext)(null),A=R.Provider;function V(){let e=(0,i.useContext)(R);if(null===e)throw Error("Store cannot be null, please add a context provider");return e}(0,c.cf)(g,e=>{N.env.NEXT_PUBLIC_DEBUG_LOG&&console.log("snapshot",e)})},4332:function(){}},function(e){e.O(0,[228,895,492,147,331,894,971,23,744],function(){return e(e.s=31)}),_N_E=e.O()}]);