(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{920:function(e,s,l){Promise.resolve().then(l.bind(l,1222))},1222:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return k}});var t=l(7437),a=l(2265),n=l(5430),c=l(7484),o=l(6283),r=l(5748),d=l(7240),i=l(8141),u=l(5378);let x=(0,n.Pi)(()=>{let e=(0,c.gM)(),[s,l]=(0,a.useState)(""),n=null!==e.modals.deleteClient,x=()=>{e.modals.setDeleteClient(null),l("")};return(0,t.jsx)(d.Z,{isOpen:n,onClose:x,header:"Remove account",body:"waiting"===e.socket.responseStatus?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("p",{children:"Deleting..."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Really remove this account from Telescope and delete all associated data?"}),(0,t.jsx)("div",{className:"flex items-center ml-6",children:(0,t.jsx)(o.QB,{account:e.modals.deleteClient})})]}),footer:"waiting"===e.socket.responseStatus?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.c,{})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Y,{isRequired:!0,type:"text",label:"Confirm",placeholder:"Type DELETE to confirm...",labelPlacement:"outside",maxLength:6,value:s,onValueChange:e=>{l(e.toUpperCase())}})}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(i.A,{color:"danger",isDisabled:"DELETE"!=s.toUpperCase(),onPress:()=>{l("");let s=e.modals.deleteClient.phone;e.socket.setWaiting(),e.socket.deleteAccount(s)},children:"Delete User"}),(0,t.jsx)(i.A,{color:"default",onPress:x,children:"Cancel"})]})]})})})});var h=l(5517);let m=/\s/g,j=(0,n.Pi)(()=>{let e=(0,c.gM)(),[s,l]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),x=null;0==s.length?x="Must enter a 2FA password.":s!=n&&(x="Password and confirm field must match.");let j=null!==e.modals.editPassword,p=()=>{e.modals.setEditPasswordClient(null),l(""),r("")};return(0,t.jsx)(d.Z,{isOpen:j,onClose:p,header:"Edit 2FA password",body:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"You are submitting a new 2FA password for the following account:"}),(0,t.jsx)("div",{className:"flex items-center ml-6",children:(0,t.jsx)(o.QB,{account:e.modals.editPassword})})]}),footer:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(u.Y,{isRequired:!0,type:"password",label:"2FA Password",placeholder:"Please enter the password...",labelPlacement:"outside",value:s,onValueChange:e=>{l(e.replaceAll(m,""))}}),(0,t.jsx)(u.Y,{isRequired:!0,type:"password",label:"Confirm",placeholder:"Please confirm the password...",labelPlacement:"outside",value:n,onValueChange:e=>{r(e.replaceAll(m,""))}})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(h.e,{content:null!=x?x:"",isDisabled:null===x,children:(0,t.jsx)("span",{children:(0,t.jsx)(i.A,{color:"danger",isDisabled:0==s.length||s!=n,onPress:()=>{l(""),r(""),e.socket.setPassword(e.modals.editPassword.phone,s),e.modals.setEditPasswordClient(null)},children:"Change Password"})})}),(0,t.jsx)(i.A,{color:"default",onPress:p,children:"Cancel"})]})]})})})});var p=l(4992),f=l(5735),g=l(4531);let w=(0,n.Pi)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.t,{}),(0,t.jsx)(x,{}),(0,t.jsx)(j,{}),(0,t.jsx)(f.v,{}),(0,t.jsx)(p.E,{})," "]}));var P=l(9687),v=l(8385),C=l(5448),A=l(3376);let b=(0,n.Pi)(()=>{let e=(0,c.gM)();return((0,a.useEffect)(()=>{let s=A.s.getInstance().wsURL+"/socket";return e.socket.connect(s),()=>{e.socket.disconnect()}},[]),"error"===e.socket.socketState)?(0,t.jsx)(v.w,{children:(0,t.jsx)(C.G,{children:"Failed to reach server. Please try again later."})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"flex ml-auto gap-4 justify-between",children:[(0,t.jsx)(P.A,{size:"sm",onClick:()=>{e.modals.setAddAccount("normal")},children:"Add Account"}),"Staging"==e.environment&&(0,t.jsx)(P.A,{size:"sm",onClick:()=>{e.modals.setMessage("Add Test Account","Really add test acccount?",[{key:"yes",label:"Yes",color:"success",actionType:"add_test_account"},{key:"cancel",label:"Cancel",color:"default",actionType:"default"}])},children:"Add Test Account"})]}),(0,t.jsx)(o.ZP,{}),"pending"===e.clientsState&&(0,t.jsx)(r.c,{})]})})});var k=(0,n.Pi)(()=>(0,t.jsx)(b,{}))}},function(e){e.O(0,[492,147,51,217,821,331,364,268,971,23,744],function(){return e(e.s=920)}),_N_E=e.O()}]);