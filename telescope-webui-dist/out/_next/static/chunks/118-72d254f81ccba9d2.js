"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{3376:function(e,t,s){s.d(t,{s:function(){return a}});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}async request(e,t){try{let s=await fetch("".concat(this.baseURL).concat(e),t),a=await s.json();if(!s.ok)return{success:!1,error:a.error||"Unknown error occurred"};return{success:!0,data:a}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}constructor(){let e=window.location.protocol,t=window.location.hostname,s="https:"===e?"https":"http",a="https:"===e?"wss":"ws";if("localhost"===t)this.baseURL="".concat(s,"://localhost:8888"),this.wsURL="".concat(a,"://localhost:8888");else{let e=window.location.port;""==e?(this.baseURL="".concat(s,"://").concat(t),this.wsURL="".concat(a,"://").concat(t)):(this.baseURL="".concat(s,"://").concat(t,":").concat(e),this.wsURL="".concat(a,"://").concat(t,":").concat(e))}}}},7484:function(e,t,s){s.d(t,{c:function(){return p},wm:function(){return N},no:function(){return T},gM:function(){return x}});var a,n,o,l,r=s(8890),c=s(2265);let i=r.V5.enumeration("ActionType",["default","disconnect","add_test_account","terminate"]),d=r.V5.model({key:r.V5.string,label:r.V5.string,color:r.V5.maybeNull(r.V5.enumeration("Color",["default","primary","secondary","success","warning","danger"])),actionType:i}),u=r.V5.maybeNull(r.V5.reference(r.V5.late(()=>s(7484).c),{get(e,t){var s;return(null===(s=(0,r.yj)(t).clients)||void 0===s?void 0:s.find(t=>t.phone===e))||null},set:e=>e.phone})),m=r.V5.model({title:r.V5.string,message:r.V5.string,buttons:r.V5.array(d),client:u}),S=r.V5.model({addAccount:r.V5.maybeNull(r.V5.enumeration("AddAccountMode",["normal","onboarding"])),provide:u,editPassword:u,viewPassword:u,viewPasswordState:r.V5.enumeration("GetPassword",["failure","ok","waiting"]),viewPasswordPass:r.V5.string,deleteClient:u,message:r.V5.maybeNull(m)}).actions(e=>({setProvideClient:function(t){e.provide=t},setEditPasswordClient:function(t){e.editPassword=t},setViewPasswordClient:function(t){e.viewPassword=t},setViewPassword:function(t){e.viewPasswordPass=t},setViewPasswordState:function(t){e.viewPasswordState=t},setDeleteClient:function(t){e.deleteClient=t},setAddAccount:function(t){e.addAccount=t},setMessage:function(t,s,a,n){e.message=m.create({title:t,message:s,buttons:a,client:n||null})},setMessageBasic:function(t,s,a){e.message=m.create({title:t,message:s,buttons:[{key:"okay",label:"Okay",color:"primary",actionType:"default"}],client:a||null})},clearMessage:function(){e.message=null}}));(a=o||(o={})).ADD_ACCOUNT="ADD_ACCOUNT",a.ADD_TEST_ACCOUNT="ADD_TEST_ACCOUNT",a.SUBMIT_VALUE="SUBMIT_VALUE",a.DELETE_ACCOUNT="DELETE_ACCOUNT",a.CONNECT_CLIENT="CONNECT_CLIENT",a.DISCONNECT_CLIENT="DISCONNECT_CLIENT",a.SET_PASSWORD="SET_PASSWORD",a.GET_PASSWORD="GET_PASSWORD",a.TERMINATE_OTHER_SESSIONS="TERMINATE_OTHER_SESSIONS";let g=r.V5.model({socketState:r.V5.enumeration(["connecting","open","closed","error"]),responseStatus:r.V5.enumeration(["waiting","received"])}).volatile(e=>({socket:null})).actions(e=>({setState(t){e.socketState=t},connect(t){e.socket&&e.socket.close(),this.setState("connecting"),e.socket=new WebSocket(t),e.socket.onopen=()=>{this.setState("open")},e.socket.onclose=()=>{this.setState("closed")},e.socket.onerror=e=>{this.setState("error")},e.socket.onmessage=t=>{let s=JSON.parse(t.data);s.hasOwnProperty("type")?(0,r.yj)(e).updateFromSocket(s):console.error("WebSocket data must contain an `id` field")}},sendMessage(t){e.socket&&e.socket.readyState===WebSocket.OPEN?e.socket.send(JSON.stringify(t)):console.error("Failed to send message: WebSocket is closed")},addAccount(e,t,s){this.sendMessage({type:o.ADD_ACCOUNT,data:{phone:e,email:t,comment:s}})},addTestAccount(){this.sendMessage({type:o.ADD_TEST_ACCOUNT})},submitValue(e,t,s){this.sendMessage({type:o.SUBMIT_VALUE,data:{phone:e,stage:t,value:s}})},deleteAccount(e){this.sendMessage({type:o.DELETE_ACCOUNT,data:{phone:e}})},disconnectClient(e){this.sendMessage({type:o.DISCONNECT_CLIENT,data:{phone:e}})},terminateOtherSessions(e){this.sendMessage({type:o.TERMINATE_OTHER_SESSIONS,data:{phone:e}})},connectClient(e){this.sendMessage({type:o.CONNECT_CLIENT,data:{phone:e}})},setPassword(e,t){this.sendMessage({type:o.SET_PASSWORD,data:{phone:e,password:t}})},getPassword(t){(0,r.yj)(e).modals.setViewPasswordState("waiting"),this.sendMessage({type:o.GET_PASSWORD,data:{phone:t}})},setWaiting(){e.responseStatus="waiting"},setReceived(){e.responseStatus="received"},disconnect(){e.socket&&(e.socket.close(),e.socket=null,e.socketState="closed")}}));(n=l||(l={})).SSO_START="SSO_START",n.CLIENT_START="CLIENT_START",n.ADD_ACCOUNT_RESPONSE="ADD_ACCOUNT_RESPONSE",n.ADD_TEST_ACCOUNT_RESPONSE="ADD_TEST_ACCOUNT_RESPONSE",n.SUBMIT_VALUE_RESPONSE="SUBMIT_VALUE_RESPONSE",n.DELETE_ACCOUNT_RESPONSE="DELETE_ACCOUNT_RESPONSE",n.CONNECT_CLIENT_RESPONSE="CONNECT_CLIENT_RESPONSE",n.DISCONNECT_CLIENT_RESPONSE="DISCONNECT_CLIENT_RESPONSE",n.SET_PASSWORD_RESPONSE="SET_PASSWORD_RESPONSE",n.GET_PASSWORD_RESPONSE="GET_PASSWORD_RESPONSE",n.TERMINATE_OTHER_SESSIONS_RESPONSE="TERMINATE_OTHER_SESSIONS_RESPONSE";var E=s(357);let h=r.V5.model({stage:r.V5.enumeration("AuthState",["ClientNotStarted","WaitingOnServer","PasswordRequired","AuthCodeRequired","EmailRequired","EmailCodeRequired","AuthorizationSuccess","ConnectionClosed","ErrorOccurred","PhoneNumberRequired","RegistrationRequired"]),inputRequired:r.V5.boolean,error:r.V5.maybeNull(r.V5.string)}),C=r.V5.enumeration("Privileges",["view","edit_two_factor_password","login","manage_connection_state","remove_account"]),p=r.V5.model({name:r.V5.maybeNull(r.V5.string),username:r.V5.maybeNull(r.V5.string),email:r.V5.maybeNull(r.V5.string),comment:r.V5.maybeNull(r.V5.string),phone:r.V5.string,two_factor_pass_is_set:r.V5.boolean,two_factor_protected:r.V5.maybeNull(r.V5.boolean),lastCode:r.V5.maybeNull(r.V5.model({value:r.V5.number,date:r.V5.number})),status:h,privileges:r.V5.array(C)}).actions(e=>({updateStatus(t){e.status=h.create(t)}})),_=r.V5.enumeration("Environment",["Development","Production"]),T=r.V5.model({clients:r.V5.array(p),ssoClient:u,ssoEmail:r.V5.maybeNull(r.V5.string),clientsState:r.V5.enumeration("State",["pending","done"]),environment:_,modals:S,socket:g}).actions(e=>({updateFromSocket:function(t){switch(E.env.NEXT_PUBLIC_DEBUG_LOG&&console.log(t),t.type){case l.CLIENT_START:e.clients=t.data.items||[],e.environment=t.data.environment,e.clientsState="done",e.ssoEmail&&(e.ssoClient=e.clients.find(t=>t.email===e.ssoEmail));break;case l.SSO_START:e.ssoEmail=t.data.email,e.ssoClient=e.clients.find(t=>t.email===e.ssoEmail);break;case l.ADD_ACCOUNT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to add account: ".concat(t.data.error));break;case l.ADD_TEST_ACCOUNT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't create test account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Created test account.");break;case l.SUBMIT_VALUE_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&console.error("SUBMIT_VALUE_RESPONSE: ".concat(t.data.error));break;case l.DELETE_ACCOUNT_RESPONSE:e.modals.setDeleteClient(null),e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to delete account: ".concat(t.data.error));break;case l.CONNECT_CLIENT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't connect account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Connected account.");break;case l.DISCONNECT_CLIENT_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't disconnect account: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Disconnected account.");break;case l.SET_PASSWORD_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status&&e.modals.setMessageBasic("Error","Failed to edit account password for: ".concat(t.data.error));break;case l.GET_PASSWORD_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?(e.modals.setViewPasswordState("failure"),e.modals.setMessageBasic("Error","".concat(t.data.error))):(e.modals.setViewPassword(t.data.value),e.modals.setViewPasswordState("ok"));break;case l.TERMINATE_OTHER_SESSIONS_RESPONSE:e.socket.responseStatus="received","ERROR"===t.data.status?e.modals.setMessageBasic("Error","Couldn't terminate other sessions: ".concat(t.data.error)):e.modals.setMessageBasic("Success","Terminated all other sessions.")}},setMockStage:function(t){e.ssoClient&&(e.ssoClient.status.stage=t)}})).create({clients:[],clientsState:"pending",environment:"Production",modals:{viewPasswordPass:"",viewPasswordState:"waiting"},socket:{socketState:"connecting",responseStatus:"received"}}),v=(0,c.createContext)(null),N=v.Provider;function x(){let e=(0,c.useContext)(v);if(null===e)throw Error("Store cannot be null, please add a context provider");return e}(0,r.cf)(T,e=>{E.env.NEXT_PUBLIC_DEBUG_LOG&&console.log("snapshot",e)})},5718:function(e,t,s){s.d(t,{QB:function(){return f},ZP:function(){return w}});var a=s(7437),n=s(5430),o=s(7484),l=s(4706),r=s(1838),c=s(9629),i=s(9139),d=s(964),u=s(3908),m=s(1272),S=s(6186);s(2265);var g=s(9687),E=s(1810),h=s(5517);let C=[{unit:"year",seconds:31104e3},{unit:"month",seconds:2592e3},{unit:"day",seconds:86400},{unit:"hour",seconds:3600},{unit:"minute",seconds:60},{unit:"second",seconds:1}];var p=s(4983),_=s(6356),T=s(9726);function v(e){return(0,a.jsx)(h.e,{content:e.content,children:(0,a.jsx)(g.A,{isIconOnly:!0,color:e.color||"default","aria-label":e.arialabel||e.content,onClick:e.onClick,isDisabled:e.disabled,children:(0,a.jsx)(e.icon,{className:e.iconClass})})})}let N=(0,n.Pi)(e=>{let{account:t,onboarding:s}=e,n=(0,o.gM)();return"ClientNotStarted"===t.status.stage?(0,a.jsx)(v,{content:"Connect Telegram session for this account",icon:_.y6x,disabled:s,onClick:()=>{n.socket.connectClient(t.phone)}}):(0,a.jsx)(v,{content:"Disconnect currently active Telegram session",icon:T.ZUl,iconClass:"font-bold",disabled:s,onClick:()=>{n.modals.setMessage("Disconnect","Really disconnect ".concat(t.phone,"?"),[{key:"disconnect",label:"Disconnect",color:"danger",actionType:"disconnect"},{key:"cancel",label:"Cancel",color:"default",actionType:"default"}],t)}})}),x=(0,n.Pi)(e=>{let{account:t,onboarding:s}=e,n=(0,o.gM)(),l=e=>t.privileges.indexOf(e)>=0;return(0,a.jsxs)(E.Pd.Provider,{value:{size:"19px"},children:[l("login")?(0,a.jsx)(v,{content:"Retrieve auth code",icon:p.dgU,disabled:!t.lastCode||s,onClick:()=>{var e;n.modals.setMessageBasic("Auth code","As of ".concat((e=t.lastCode.date,function(e){for(let{unit:t,seconds:s}of C)if(e>=s){let a=Math.floor(e/s);return"".concat(a," ").concat(t).concat(1!==a?"s":"")}return"0 seconds"}(Math.floor(Date.now()/1e3)-e))," ago the login code is: ").concat(t.lastCode.value))}}):null,l("manage_connection_state")?(0,a.jsx)(N,{onboarding:s,account:t}):null,l("manage_connection_state")?(0,a.jsx)(v,{content:"Terminate other sessions",icon:_.LvP,disabled:s||"AuthorizationSuccess"!=t.status.stage,onClick:()=>{n.modals.setMessage("Terminate other sesesions","Really terminate other sessions for ".concat(t.phone,"?"),[{key:"terminate",label:"Terminate",color:"danger",actionType:"terminate"},{key:"cancel",label:"Cancel",color:"default",actionType:"default"}],t)}}):null,l("edit_two_factor_password")?(0,a.jsx)(v,{content:"Edit account's 2FA password",icon:_.U$P,disabled:s,onClick:()=>{n.modals.setEditPasswordClient(t)}}):null,(0,a.jsx)(v,{content:"View 2FA password",icon:_.EmA,disabled:s||!t.two_factor_pass_is_set,onClick:()=>{n.socket.getPassword(t.phone),n.modals.setViewPasswordClient(t)}}),l("remove_account")?(0,a.jsx)(v,{content:"Remove account from Telescope",icon:_.FH3,color:"danger",disabled:s,onClick:()=>{n.modals.setDeleteClient(t)}}):null]})}),f=(0,n.Pi)(e=>{var t,s;let{account:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-bold text-sm",children:null!==(s=null!==(t=n.username)&&void 0!==t?t:n.name)&&void 0!==s?s:"<no username>"}),(0,a.jsx)("p",{className:"text-bold text-sm text-default-400",children:(0,S.u)(n.phone)}),10===n.phone.length&&(0,a.jsxs)("p",{className:"text-bold text-sm text-default-400",children:["Code: ",n.phone[5].repeat(5)]}),(0,a.jsx)("p",{className:"text-bold text-sm text-default-400",children:n.email}),(0,a.jsx)("p",{className:"text-bold text-sm text-default-400",children:n.comment})]})}),P=(0,n.Pi)(e=>{let{account:t}=e,s=(0,S.U)(t);return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(l.z,{className:"capitalize",color:s,size:"sm",variant:"flat",children:t.status.stage}),null!=t.two_factor_protected&&!1==t.two_factor_protected&&(0,a.jsx)(l.z,{className:"capitalize",color:"danger",size:"sm",variant:"flat",children:"MissingTwoFactor"})]})}),R=(0,n.Pi)(e=>{let{account:t}=e,s=(0,o.gM)(),n=(0,S.U)(t);return null!==t.status.error?(0,a.jsx)("p",{children:t.status.error}):"success"===n||!t.status.inputRequired||0>t.privileges.indexOf("manage_connection_state")?null:(0,a.jsx)(g.A,{isLoading:"warning"===n,onClick:()=>{s.modals.setProvideClient(t)},children:"Provide"})}),A=(0,n.Pi)(e=>{let{account:t,onboarding:s}=e;return(0,a.jsx)("div",{className:"relative flex items-center gap-2",children:(0,a.jsx)(x,{account:t,onboarding:s})})}),O=[{name:"NAME",uid:"name"},{name:"STATUS",uid:"status"},{name:"AUTHENTICATION",uid:"authentication"},{name:"ACTIONS",uid:"actions"}];var w=(0,n.Pi)(e=>{let{onboarding:t}=e,s=(0,o.gM)();return(0,a.jsxs)(r.b,{"aria-label":"Telegram account table",children:[(0,a.jsx)(c.J,{columns:O,children:e=>(0,a.jsx)(i.j,{align:"actions"===e.uid?"center":"start",children:e.name},e.uid)}),(0,a.jsx)(d.y,{items:s.clients,children:s.clients.map(e=>(0,a.jsxs)(u.g,{children:[(0,a.jsx)(m.X,{children:(0,a.jsx)(f,{account:e})}),(0,a.jsx)(m.X,{children:(0,a.jsx)(P,{account:e})}),(0,a.jsx)(m.X,{children:(0,a.jsx)(R,{account:e})}),(0,a.jsx)(m.X,{children:(0,a.jsx)(A,{onboarding:t,account:e})})]},e.phone))})]})})},4531:function(e,t,s){s.d(t,{t:function(){return m}});var a=s(7437),n=s(5430),o=s(7484),l=s(7240),r=s(2265),c=s(5378),i=s(5748),d=s(8141);function u(e){return e&&e.length>0?e:null}let m=(0,n.Pi)(()=>{let e=(0,o.gM)(),[t,s]=(0,r.useState)(!1),[n,m]=(0,r.useState)(""),[S,g]=(0,r.useState)(""),[E,h]=(0,r.useState)(""),C=()=>{e.modals.setAddAccount(null)};return(0,a.jsx)(l.Z,{isOpen:null!==e.modals.addAccount,onClose:C,header:"Add Telegram Account",body:t?(0,a.jsx)(a.Fragment,{children:"Submitting..."}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(c.Y,{isRequired:!0,type:"text",label:"Phone number",placeholder:"Enter phone number...",labelPlacement:"outside",maxLength:11,pattern:"d{11}",value:n,onValueChange:e=>{m(e)}}),(0,a.jsx)(c.Y,{isRequired:!1,type:"email",label:"E-mail",placeholder:"Enter email...",labelPlacement:"outside",maxLength:255,value:S,onValueChange:e=>{g(e)}}),(0,a.jsx)(c.Y,{isRequired:!1,type:"text",label:"Comment",placeholder:"Account belongs to...",labelPlacement:"outside",maxLength:300,value:E,onValueChange:e=>{h(e)}})]}),footer:t?(0,a.jsx)(i.c,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{color:"danger",variant:"light",onPress:C,children:"Close"}),(0,a.jsx)(d.A,{color:"primary",onPress:async()=>{s(!0),e.socket.addAccount(n,u(S),u(E)),e.modals.setAddAccount(null),s(!1)},children:"Submit"})]})})})},7326:function(e,t,s){s.d(t,{Ld:function(){return g},_Y:function(){return S},c6:function(){return m}});var a=s(7437),n=s(5430),o=s(7484),l=s(7240),r=s(2265),c=s(5517),i=s(8141),d=s(5378),u=s(5718);let m=/\s/g,S=(0,n.Pi)(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Y,{isRequired:!0,type:"password",label:"2FA Password",placeholder:"Please enter the password...",labelPlacement:"outside",value:e.value,onValueChange:e.onValueChange}),(0,a.jsx)(d.Y,{isRequired:!0,type:"password",label:"Confirm",placeholder:"Please confirm the password...",labelPlacement:"outside",value:e.valueConfirm,onValueChange:e.onValueChangeConfirm})]})),g=(0,n.Pi)(()=>{let e=(0,o.gM)(),[t,s]=(0,r.useState)(""),[n,d]=(0,r.useState)(""),g=null;0==t.length?g="Must enter a 2FA password.":t!=n&&(g="Password and confirm field must match.");let E=null!==e.modals.editPassword,h=()=>{e.modals.setEditPasswordClient(null),s(""),d("")};return(0,a.jsx)(l.Z,{isOpen:E,onClose:h,header:"Edit 2FA password",body:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"You are submitting a new 2FA password for the following account:"}),(0,a.jsx)("div",{className:"flex items-center ml-6",children:(0,a.jsx)(u.QB,{account:e.modals.editPassword})})]}),footer:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(S,{value:t,onValueChange:e=>{s(e.replaceAll(m,""))},valueConfirm:n,onValueChangeConfirm:e=>{d(e.replaceAll(m,""))}})}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(c.e,{content:null!=g?g:"",isDisabled:null===g,children:(0,a.jsx)("span",{children:(0,a.jsx)(i.A,{color:"danger",isDisabled:0==t.length||t!=n,onPress:()=>{s(""),d(""),e.socket.setPassword(e.modals.editPassword.phone,t),e.modals.setEditPasswordClient(null)},children:"Change Password"})})}),(0,a.jsx)(i.A,{color:"default",onPress:h,children:"Cancel"})]})]})})})})},4992:function(e,t,s){s.d(t,{E:function(){return i}});var a=s(7437),n=s(5430),o=s(7240),l=s(7484),r=s(8141);s(2265);let c={default:e=>{e.modals.clearMessage()},disconnect:e=>{var t;let s=null===(t=e.modals.message)||void 0===t?void 0:t.client;e.modals.clearMessage(),s&&e.socket.disconnectClient(s.phone)},add_test_account:e=>{e.modals.clearMessage(),e.socket.addTestAccount()},terminate:e=>{var t;let s=null===(t=e.modals.message)||void 0===t?void 0:t.client;e.modals.clearMessage(),s&&e.socket.terminateOtherSessions(s.phone)}},i=(0,n.Pi)(()=>{var e,t,s;let n=(0,l.gM)(),i=n.modals;return(0,a.jsx)(o.Z,{isOpen:null!==i.message,onClose:()=>{i.clearMessage()},header:null===(e=i.message)||void 0===e?void 0:e.title,body:(0,a.jsx)("p",{children:null===(t=i.message)||void 0===t?void 0:t.message}),footer:null===(s=i.message)||void 0===s?void 0:s.buttons.map(e=>(0,a.jsx)(r.A,{color:e.color||void 0,onPress:()=>{c[e.actionType](n)},children:e.label},e.key))})})},7240:function(e,t,s){var a=s(7437),n=s(2481),o=s(8592),l=s(5256),r=s(1887),c=s(7971);s(2265);let i=(0,s(5430).Pi)(e=>(0,a.jsx)(n.R,{isOpen:e.isOpen,onClose:e.onClose,children:(0,a.jsxs)(o.A,{children:[(0,a.jsx)(l.k,{className:"flex flex-col gap-1",children:e.header}),(0,a.jsx)(r.I,{children:e.body}),(0,a.jsx)(c.R,{children:e.footer})]})}));t.Z=i},5735:function(e,t,s){s.d(t,{E$:function(){return m},Tm:function(){return u},v:function(){return S}});var a=s(7437),n=s(5430),o=s(7484),l=s(7240),r=s(2265),c=s(5748),i=s(8141),d=s(5378);let u={PasswordRequired:{name:"PasswordRequired",inputType:"text",label:"Password",placeholder:"Enter the account password",filter_regex:/\s/g,validate:e=>e.length>0?null:"Cannot be empty."},AuthCodeRequired:{name:"AuthCodeRequired",inputType:"text",label:"Auth Code",placeholder:"Enter the Telegram auth code",maxLength:5,filter_regex:/\D/g,validate:e=>/^[0-9]{5}$/.test(e)?null:"Auth code is exactly 5 digits."},EmailCodeRequired:{name:"EmailCodeRequired",inputType:"text",label:"E-mail code",placeholder:"Enter code from email",filter_regex:/\s/g,validate:e=>e.length>0?null:"Must enter an email code."}},m=(0,n.Pi)(e=>{var t,s,n,o,l;return(0,a.jsx)(d.Y,{isRequired:!0,type:null===(t=e.type)||void 0===t?void 0:t.inputType,label:null===(s=e.type)||void 0===s?void 0:s.label,placeholder:null===(n=e.type)||void 0===n?void 0:n.placeholder,maxLength:null===(o=e.type)||void 0===o?void 0:o.maxLength,isInvalid:null!==e.errorMsg,color:null!==e.errorMsg?"danger":"success",errorMessage:null!==(l=e.errorMsg)&&void 0!==l?l:"",value:e.value,onValueChange:e.onValueChange})}),S=(0,n.Pi)(()=>{var e;let t=(0,o.gM)(),[s,n]=(0,r.useState)(!1),[d,S]=(0,r.useState)(""),g=null!==t.modals.provide,E=g?u[t.modals.provide.status.stage]:null,h=null;null!==E&&(null==E?void 0:E.validate)!==null&&(h=E.validate(d));let C=()=>{t.modals.setProvideClient(null),S("")};return(0,a.jsx)(l.Z,{isOpen:g,onClose:C,header:null===(e=t.modals.provide)||void 0===e?void 0:e.status.stage,body:s?(0,a.jsx)(a.Fragment,{children:"Submitting..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Please enter the thingy."}),(0,a.jsx)("div",{children:(0,a.jsx)(m,{type:E,errorMsg:h,value:d,onValueChange:e=>{(null==E?void 0:E.filter_regex)?S(e.replaceAll(E.filter_regex,"")):S(e)}})})]}),footer:s?(0,a.jsx)(c.c,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{color:"danger",variant:"light",onPress:C,children:"Close"}),(0,a.jsx)(i.A,{color:"primary",onPress:async()=>{n(!0);let e=t.modals.provide;t.socket.submitValue(null==e?void 0:e.phone,null==e?void 0:e.status.stage,d),n(!1),t.modals.setProvideClient(null),S("")},children:"Submit"})]})})})},6186:function(e,t,s){function a(e){return 11===e.length?"+".concat(e[0],"-").concat(e.slice(1,4),"-").concat(e.slice(4,7),"-").concat(e.slice(7)):10===e.length?"".concat(e.slice(0,3),"-").concat(e.slice(3,6),"-").concat(e.slice(6)):7===e.length?"".concat(e.slice(0,3),"-").concat(e.slice(3)):e}function n(e){let t="warning";return"AuthorizationSuccess"===e.status.stage?t="success":"ClientNotStarted"===e.status.stage?t="default":("ConnectionClosed"===e.status.stage||"ErrorOccurred"===e.status.stage||!0===e.status.inputRequired)&&(t="danger"),t}s.d(t,{U:function(){return n},u:function(){return a}})}}]);